# WhatEating iOS App 配置指南

## ✅ 项目状态

**已完成：**

- ✅ 所有 Swift 文件已创建
- ✅ 文件已自动添加到 Xcode 项目
- ✅ 项目编译成功
- ✅ 后端服务已启动
- ✅ Xcode 已打开

**下一步：在 Xcode 中配置网络权限并运行应用**

---

## 已创建的文件

我已经为您创建了以下 Swift 文件，完整移植了前端的功能：

### 📁 Models (数据模型)

- `Models/Dish.swift` - 菜品数据模型和 API 响应结构

### 🌐 Services (网络服务)

- `Services/APIService.swift` - API 网络请求服务（包含所有 API 接口）

### 🎨 Views (视图组件)

- `Views/HeaderView.swift` - 头部组件
- `Views/InputSectionView.swift` - 输入框组件
- `Views/ActionButtonView.swift` - 操作按钮组件
- `Views/ResultDisplayView.swift` - 结果显示组件

### 🏠 Main (主视图)

- `ContentView.swift` - 主视图（已更新）

## 🔧 配置步骤

### 1. 在 Xcode 中添加文件到项目

1. **打开 Xcode 项目**

   ```bash
   open /Users/dangchy/RnWorkspace/viteWorkspace/WhatEating/WhatEatingApp/WhatEatingApp.xcodeproj
   ```

2. **创建文件夹分组**

   - 在项目导航器中，右键点击 `WhatEatingApp` 文件夹
   - 选择 `New Group`，创建以下三个文件夹：
     - `Models`
     - `Services`
     - `Views`

3. **添加文件到项目**

   对于每个文件：

   - 右键点击对应的文件夹分组（Models/Services/Views）
   - 选择 `Add Files to "WhatEatingApp"...`
   - 找到并选择对应的文件
   - **重要**：确保勾选 `Copy items if needed` 和 `Add to targets: WhatEatingApp`

   需要添加的文件：

   - Models 文件夹：添加 `Models/Dish.swift`
   - Services 文件夹：添加 `Services/APIService.swift`
   - Views 文件夹：添加所有 Views 目录下的文件

4. **或者使用命令行批量添加**（推荐）

   关闭 Xcode，然后我可以帮您使用脚本自动添加。

### 2. 配置网络权限

在 `Info.plist` 中添加网络权限（允许访问本地后端服务）：

1. 在项目导航器中找到 `Info.plist`
2. 添加以下配置：
   - Key: `App Transport Security Settings` (字典类型)
     - Key: `Allow Arbitrary Loads` - Value: `YES` (Boolean)

### 3. 确保后端服务运行

确保后端服务在局域网 IP 上运行：

```bash
cd /Users/dangchy/RnWorkspace/viteWorkspace/WhatEating/backend
npm start
```

后端应该运行在 `http://192.168.50.166:3000`

### 4. 运行 iOS 应用

1. 选择模拟器（iPhone 15 或其他）
2. 点击运行按钮（或按 Cmd+R）

## 🎯 功能特性

移植后的 iOS 应用包含以下功能：

✅ 随机菜品推荐
✅ 渐变色彩设计
✅ 加载动画
✅ 错误处理和提示
✅ 响应式 UI
✅ SwiftUI 原生组件
✅ 网络请求处理

## 📝 API 配置

API 基础地址配置在 `Services/APIService.swift` 中：

```swift
private let baseURL = "http://192.168.50.166:3000/api"
```

如需修改，请更新此地址。

## 🐛 常见问题

### 问题 1: 编译错误 - 找不到文件

**解决方案**：确保所有文件都已添加到 Xcode 项目中，并且 Target Membership 已勾选

### 问题 2: 网络请求失败

**解决方案**：

1. 检查后端服务是否运行
2. 检查 Info.plist 中的网络权限配置
3. 确认 IP 地址是否正确

### 问题 3: 模拟器无法连接到后端

**解决方案**：

- 使用真机测试（确保在同一 WiFi 下）
- 或将 API 地址改为 `http://localhost:3000/api` 用于模拟器测试

## 下一步

如果您遇到任何问题，请告诉我，我会帮您解决！
