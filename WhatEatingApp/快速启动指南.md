# 🎉 WhatEating iOS App 快速启动指南

## ✅ 当前状态

**已完成：**

- ✅ 所有 Swift 文件已创建并移植前端功能
- ✅ 文件已自动添加到 Xcode 项目
- ✅ 项目编译成功 (BUILD SUCCEEDED)
- ✅ 后端服务已启动在 http://localhost:3000
- ✅ Xcode 已打开

## 🚀 立即运行应用

### 步骤 1: 配置网络权限（必须！）

在 Xcode 中：

1. 点击项目导航器中的 **WhatEatingApp** 项目（蓝色图标）
2. 选择 **WhatEatingApp** target（在左侧）
3. 切换到 **Info** 选项卡
4. 点击列表最后一行的 **+** 按钮
5. 添加以下配置：

```
Key: App Transport Security Settings (Dictionary)
  └─ Key: Allow Arbitrary Loads (Boolean) = YES
```

**视觉指引：**

- App Transport Security Settings 的类型选择 "Dictionary"
- Allow Arbitrary Loads 的类型选择 "Boolean"，值设为 "YES"

### 步骤 2: 选择运行目标

**选项 A：使用模拟器（需要修改 API 地址）**

1. 在 Xcode 顶部工具栏选择任意 iPhone 模拟器
2. 打开 `Services/APIService.swift`
3. 将第 34 行的：
   ```swift
   private let baseURL = "http://192.168.50.166:3000/api"
   ```
   改为：
   ```swift
   private let baseURL = "http://localhost:3000/api"
   ```

**选项 B：使用真机（推荐，无需修改）**

1. 用数据线连接您的 iPhone 到 Mac
2. 在 Xcode 顶部工具栏选择您的设备
3. 确保 iPhone 和 Mac 在同一 WiFi 下
4. API 地址保持为 `http://192.168.50.166:3000/api`

### 步骤 3: 运行应用

点击 Xcode 左上角的 **▶️ 运行按钮**（或按 `Cmd+R`）

## 🎨 应用功能

运行后您将看到：

- 🍜 **标题**: "今天吃什么？"
- 📝 **输入框**: 可输入关键词（暂未使用）
- 🔄 **渐变按钮**: "随机推荐"
  - 点击后显示加载动画
  - 从后端获取随机菜品
  - 展示菜品卡片（名称、描述、分类）
- ✨ **动画效果**: 卡片弹出动画

## 📂 项目文件结构

```
WhatEatingApp/
├── Models/
│   └── Dish.swift                    # 数据模型
├── Services/
│   └── APIService.swift              # 网络请求
├── Views/
│   ├── HeaderView.swift              # 头部
│   ├── InputSectionView.swift        # 输入框
│   ├── ActionButtonView.swift        # 按钮
│   └── ResultDisplayView.swift       # 结果展示
├── ContentView.swift                 # 主视图
└── WhatEatingAppApp.swift           # 应用入口
```

## 🔧 技术栈

- **SwiftUI** - 原生 UI 框架
- **Async/Await** - 异步网络请求
- **Codable** - JSON 解析
- **URLSession** - HTTP 客户端

## 🐛 常见问题

### 问题 1: "Failed to load" 网络错误

**原因**: App Transport Security 未配置

**解决**: 按照步骤 1 配置网络权限

### 问题 2: 模拟器显示网络连接失败

**原因**: API 地址使用了局域网 IP

**解决**:

- 改为使用真机测试，或
- 修改 API 地址为 `http://localhost:3000/api`

### 问题 3: 后端服务未运行

**检查**: 在终端运行

```bash
lsof -i :3000
```

**启动后端**:

```bash
cd /Users/dangchy/RnWorkspace/viteWorkspace/WhatEating/backend
npm start
```

## 📱 测试步骤

1. ✅ 应用启动成功
2. ✅ 点击"随机推荐"按钮
3. ✅ 显示加载动画
4. ✅ 成功展示菜品卡片
5. ✅ 可以多次点击获取不同菜品

## 🎉 完成！

您的 iOS 应用已经成功移植了所有前端功能，现在可以正常使用了！

---

**提示**: 如有问题，请检查 Xcode 控制台的错误信息。
